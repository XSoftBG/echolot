(function(a){a.addFlex=function(x,A){if(x.grid){return false}A=a.extend({height:"auto",width:"auto",striped:true,novstripe:false,minwidth:30,minheight:80,resizable:false,url:false,method:"POST",dataType:"xml",errormsg:"Connection Error",usepager:false,nowrap:true,page:1,total:1,useRp:true,rp:15,rpOptions:[10,15,20,25,40],title:false,colModel:false,pagestat:"Displaying {from} to {to} of {total} items",procmsg:"Processing, please wait ...",hidecolmsg:"Hide/Show Columns",mintablemsg:"Minimize/Maximize Table",query:"",qtype:"",nomsg:"No items",minColToggle:1,showToggleBtn:true,showPageStat:true,hideOnSubmit:true,autoload:true,blockOpacity:0.5,onToggleCol:false,onChangeSort:false,onSuccess:false,onChangePage:false,onSubmit:false,onPopulateCallback:false,onDragCol:false,onResizeCol:false,onResizeGrid:false,owner:false,debug:false,sortorder:"asc",sortModel:{columns:[]},clientsort:true,digitGroupDL:".",decimalDelimiter:",",heightOffset:100,searchitems:false},A);a(x).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("width");var I={hset:{},rePosDrag:function(){if(A.debug){var Q=new Date()}var t=0-this.hDiv.scrollLeft;if(this.hDiv.scrollLeft>0){t-=Math.floor(A.cgwidth/2)}a(I.cDrag).css({top:I.hDiv.offsetTop+1});var s=this.cdpad;var i=a("div",I.cDrag);i.hide();var g=a("thead tr:first th:visible",this.hDiv);for(var S=0;S<g.length;S++){var R=parseInt(a(g[S]).width());if(t==0){t-=Math.floor(A.cgwidth/2)}R=R+t+s;a(i[S]).css({left:R+"px"}).show();t=R}if(A.debug&&window.console&&window.console.log){console.log("Duration of rePosDrag :"+(new Date()-Q)+"ms")}},autoColumnWidth:function(){if(A.debug){var i=new Date()}var t=0;var g=this;a("thead tr:first th:visible",this.hDiv).each(function(){var Q=a("th:visible div:eq("+t+")",this.hDiv).width();a("tr",g.bDiv).each(function(){var R=a("td:visible div:eq("+t+")",this).width();if(Q<R){Q=R}});a("th:visible div:eq("+t+")",g.hDiv).css("width",Q);a("tr",g.bDiv).each(function(){a("td:visible div:eq("+t+")",this).css("width",Q)});a(g.hDiv).scrollLeft(a(g.bDiv).scrollLeft);g.rePosDrag();g.fixHeight();t++});if(A.debug&&window.console&&window.console.log){var s=new Date();console.log("Duration of autoColumnWidth :"+(s-i)+"ms")}},fixHeight:function(i){if(A.debug){var s=new Date()}i=false;if(!i){i=a(I.bDiv).height()}var Q=a(this.hDiv).height();a("div",this.cDrag).each(function(){a(this).height(i+Q)});a(I.block).css({height:i,marginBottom:(i*-1)});var g=I.bDiv.offsetTop+i;if(A.height!="auto"&&A.resizable){g=I.vDiv.offsetTop}a(I.rDiv).css({height:g});if(A.debug&&window.console&&window.console.log){var t=new Date();console.log("Duration of fixHeight :"+(t-s)+"ms")}},dragStart:function(Q,t,s){if(Q=="colresize"){a(I.nDiv).hide();a(I.nBtn).hide();var R=a("div",this.cDrag).index(s);var g=a("th:visible:eq("+R+")",this.hDiv).width();a(s).addClass("dragging").siblings().hide();a(s).prev().addClass("dragging").show();this.colresize=a.extend(true,{},{startX:t.pageX,ol:parseInt(s.style.left),ow:g,n:R});a("body").css("cursor","col-resize")}else{if(Q=="vresize"){var i=false;a("body").css("cursor","row-resize");if(s){i=true;a("body").css("cursor","col-resize")}this.vresize={h:A.height,sy:t.pageY,w:A.width,sx:t.pageX,hgo:i}}else{if(Q=="colMove"){a(I.nDiv).hide();a(I.nBtn).hide();this.hset=a(this.hDiv).offset();this.hset.right=this.hset.left+a("table",this.hDiv).width();this.hset.bottom=this.hset.top+a("table",this.hDiv).height();this.dcol=s;this.dcoln=a("th",this.hDiv).index(s);this.colCopy=document.createElement("div");this.colCopy.className="colCopy";this.colCopy.innerHTML=s.innerHTML;if(a.browser.msie){this.colCopy.className="colCopy ie"}a(this.colCopy).css({position:"absolute","float":"left",display:"none",textAlign:s.align});a("body").append(this.colCopy);a(this.cDrag).hide()}}}a(I.gDiv).noSelect()},dragMove:function(Q){if(this.colresize){var i=this.colresize.n;var V=Q.pageX-this.colresize.startX;var R=this.colresize.ol+V;var t=this.colresize.ow+V;if(t>A.minwidth){a("div:eq("+i+")",this.cDrag).css("left",R);this.colresize.nw=t}}else{if(this.vresize){var W=this.vresize;var T=Q.pageY;var V=T-W.sy;if(!A.defwidth){A.defwidth=A.width}if(A.width!="auto"&&!A.nohresize&&W.hgo){var U=Q.pageX;var s=U-W.sx;var g=W.w+s;if(g>A.defwidth){this.gDiv.style.width=g+"px";A.width=g}}var S=W.h+V;if((S>A.minheight||A.height<A.minheight)&&!W.hgo){this.bDiv.style.height=S+"px";A.height=S;this.fixHeight(S)}W=null}else{if(this.colCopy){a(this.dcol).addClass("thMove").removeClass("thOver");if(Q.pageX>this.hset.right||Q.pageX<this.hset.left||Q.pageY>this.hset.bottom||Q.pageY<this.hset.top){a("body").css("cursor","move")}else{a("body").css("cursor","pointer")}a(this.colCopy).css({top:Q.pageY+10,left:Q.pageX+20,display:"block"})}}}},dragEnd:function(){if(A.debug){var t=new Date()}if(this.colresize){I.setBusy(true);console.log("col idx:"+this.colresize.n);var Q=this.colresize.n;var S=this.colresize.nw;var R=a("th:visible:eq("+Q+")",this.hDiv);R.css("width",S);R.data("isUserSized",true);var W=a("#"+a.fn.fixID(A.ownerId+".DATA")).children("tr");var g=0;function T(){var X=20;do{X--;if(g<W.length){a(W[g++]).children("td:visible:eq("+Q+")").css("width",S);if(X<=0){setTimeout(T,1);return}}else{X=0}}while(X>0);I.setBusy(false)}setTimeout(T,1);this.hDiv.scrollLeft=this.bDiv.scrollLeft;a("div:eq("+Q+")",this.cDrag).siblings().show();a(".dragging",this.cDrag).removeClass("dragging");this.rePosDrag();this.fixHeight();this.colresize=false;if(A.onResizeCol&&A.colModel){var i=A.colModel[Q].id;A.onResizeCol.call(A.owner,i,S)}if(A.debug&&window.console&&window.console.log){var U=new Date();console.log("Duration of dragEnd (colresize) :"+(U-t)+"ms")}}else{if(this.vresize){this.vresize=false;if(A.onResizeGrid){A.onResizeGrid.call(A.owner,A.width,A.height)}}else{if(this.colCopy){a(this.colCopy).remove();if(this.dcolt!=null){if(this.dcoln>this.dcolt){a("th:eq("+this.dcolt+")",this.hDiv).before(this.dcol)}else{a("th:eq("+this.dcolt+")",this.hDiv).after(this.dcol)}this.switchCol(this.dcoln,this.dcolt);a(this.cdropleft).remove();a(this.cdropright).remove();this.rePosDrag();if(A.onDragCol&&A.colModel){var s=A.colModel[this.dcoln].id}var V=A.colModel[this.dcolt].id;A.onDragCol.call(A.owner,s,V)}this.dcol=null;this.hset=null;this.dcoln=null;this.dcolt=null;this.colCopy=null;a(".thMove",this.hDiv).removeClass("thMove");a(this.cDrag).show();if(A.debug&&window.console&&window.console.log){var U=new Date();console.log("Duration of dragEnd (colCopy) :"+(U-t)+"ms")}}}}a("body").css("cursor","default");a(I.gDiv).noSelect(false)},toggleCol:function(T,R){var i=a("th[axis='col"+T+"']",this.hDiv)[0];var S=a("thead th",I.hDiv).index(i);var g=a("input[value="+T+"]",I.nDiv)[0];if(R==null){R=i.hide}if(a("input:checked",I.nDiv).length<A.minColToggle&&!R){return false}if(R){i.hide=false;a(i).show();g.checked=true}else{i.hide=true;a(i).hide();g.checked=false}var Q=a("#"+a.fn.fixID(A.ownerId+".DATA"));var t=Q.children("tr");t.each(function(){a(this).children("td:eq("+S+")").toggle()});this.rePosDrag();if(A.onToggleCol&&A.colModel){var s=A.colModel[T].id;A.onToggleCol.call(A.owner,s,R)}return R},switchCol:function(i,g){var t=a("#"+a.fn.fixID(A.ownerId+".DATA"));var s=t.children("tr");s.each(function(){var S=a(this);var Q=S.children("td:eq("+g+")");var R=S.children("td:eq("+i+")");if(i>g){Q.before(R)}else{Q.after(R)}});if(i>g){a("tr:eq("+g+")",this.nDiv).before(a("tr:eq("+i+")",this.nDiv))}else{a("tr:eq("+g+")",this.nDiv).after(a("tr:eq("+i+")",this.nDiv))}if(a.browser.msie&&a.browser.version<7){a("tr:eq("+g+") input",this.nDiv)[0].attr("checked",true)}this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(A.debug&&window.console&&window.console.log){console.log("Triggered switchCol.")}},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft;this.rePosDrag()},addData:function(T){if(!T){I.setBusy(false);R();return false}if(A.dataType=="xml"){A.total=+a("rows total",T).text()}else{A.total=T.total}if(A.total==0){a("tr, a, td, div",x).unbind();a(x).empty();A.pages=1;A.page=1;this.buildpager();a(".pPageStat",this.pDiv).html(A.nomsg);if(A.onSuccess){A.onSuccess.call(A.owner)}I.setBusy(false);return false}A.pages=Math.ceil(A.total/A.rp);if(A.dataType=="xml"){A.page=+a("rows page",T).text()}else{A.page=T.page}var U=document.createElement("tbody");U.id=A.ownerId+".DATA";var i=a(U);if(A.height=="auto"){var g=a(I.gDiv);var Q=g.offsetParent().attr("offsetHeight")-A.heightOffset;a(I.bDiv).css({height:Q+"px"});var S=Q-100;if(A.debug&&window.console&&window.console.log){console.log("Finalize calculated height :"+Q+" px, heightOffset: "+A.heightOffset+" px, menuHeight: "+S)}}if(A.debug){var s=new Date()}function R(){var ad=a(x);a("tr",ad).unbind();ad.empty().append(i);I.rePosDrag();I.fixHeight();U=null;i=null;T=null;if(A.onSuccess){A.onSuccess.call(A.owner)}I.setBusy(false);if(I.lazyFocus){I.lazyFocus.call(this,true)}I.buildpager();if(A.debug&&window.console&&window.console.log){var ac=new Date();console.log('Duration of rendering data of type "'+A.dataType+'": '+(ac-s)+"ms")}return false}var t=a("thead tr:first th",I.hDiv);if(A.dataType=="json"){var X=0;var ab=null;function W(){var ai=20;do{ai--;if(T&&T.rows.length>X&&T.rows[X]){ab=T.rows[X];var ag=document.createElement("tr");var af=a(ag);if(X%2&&A.striped){ag.className="erow"}if(ab.id===null){}else{ag.id=A.ownerId+".ROW."+ab.id}var ae=t.length;for(var ac=0;ac<ae;ac++){var ad=t[ac];var aj=document.createElement("td");af.append(aj);var ah=a(ad).data("rowDataIndex");I.addCellProp(aj,af,ab.cells[ah],ad)}I.addRowProp(af);i.append(ag);X++;if(ai<=0){setTimeout(W,1);return true}}else{ai=0}}while(ai>0);R();return false}setTimeout(W,1)}else{if(A.dataType=="xml"){var V=1;var Z=0;var aa=a("rows row",T);function Y(){if(Z<aa.length){var ak=aa[Z];if(ak){var ag=a(ak);V++;var ah=document.createElement("tr");var ae=a(ah);if(V%2&&A.striped){ah.className="erow"}var ac=ag.attr("id");if(ac===null){}else{ah.id=A.ownerId+".ROW."+ak.nid}ac=null;var aj=a("cell",ak);for(var ai=0;ai<aj.length;ai++){var af=document.createElement("td");var ad=ai<t.length?t[ai]:null;ae.append(af);I.addCellProp(af,ae,a(aj[ai]).text(),ad)}i.append(ah);ah=null;Z++;setTimeout(Y,1)}else{R()}}else{R()}}setTimeout(Y,1)}else{throw new Error('DataType "'+A.dataType+'" could not be handled.')}}},changeSort:function(R,af){if(A.debug){var X=new Date()}if(this.loading){return true}this.setBusy(true);a(I.nDiv).hide();a(I.nBtn).hide();if(!af){if(A.debug){var Z=new Date()}A.sortModel.columns=[];var ac=a("div",R);a("thead tr:first th div",this.hDiv).not(ac).removeClass("sdesc").removeClass("sasc");a(R).siblings().removeClass("sorted");if(A.debug&&window.console&&window.console.log){console.log("Multiselect is false, cleaned up columns in "+(new Date()-Z)+'ms. remaining column: "'+a(R).attr("abbr")+'" classes: "'+ac.attr("class")+'"')}}var Y=a("div",R);var V=a(R).hasClass("sorted");var U=new Object();var S=a(R).attr("abbr");var ae=a(R,R.parentNode).index();if(V){var t="";if(A.sortModel.columns.length>0){for(var W=0;W<A.sortModel.columns.length;W++){var Q=A.sortModel.columns[W];if(Q.columnId==S){Q.sortOrder=(a(Y).hasClass("sasc")?"asc":"desc");U=Q;break}}}else{var U=new Object({columnId:S,columnIdx:ae,sortOrder:(a(Y).hasClass("sasc")?"asc":"desc")});A.sortModel.columns.push(U)}}else{if(!V){a(R).addClass("sorted");Y.addClass("s"+A.sortorder);var U=new Object({columnId:S,columnIdx:ae,sortOrder:A.sortorder});A.sortModel.columns.push(U)}}var s=JSON.parse(JSON.stringify(this.data));this.multiSort(A.sortModel,new exxcellent.model.ColumnModel(A.colModel),new exxcellent.model.TableModel(new Array(s)));this.data=s;var T=[];a(A.sortModel.columns).each(function(ai,ah){T.push(ah.columnIdx)});var ag=function(ah,ai){if(Core.Arrays.indexOf(T,ah)>=0){a(ai).addClass("sorted")}else{a(ai).removeClass("sorted")}};var aa=0;var ad=a("#"+a.fn.fixID(A.ownerId+".DATA"));function i(){var ai=20;do{ai--;if(aa<s.rows.length){var ah=a("#"+a.fn.fixID(A.ownerId+".ROW."+s.rows[aa++].id));ah.children().each(ag);if(aa%2==0&&A.striped){ah.addClass("erow")}else{ah.removeClass("erow")}ad.append(ah);if(ai<=0){setTimeout(i,1);return}}else{ai=0}}while(ai>0);I.setBusy(false)}setTimeout(i,1);if(A.onChangeSort){A.onChangeSort.call(A.owner,A.sortModel)}if(A.debug&&window.console&&window.console.log){var g=new Date();var ab=af?"yes":"no";console.log("Change sort to "+U.sortOrder+" for column "+U.columnId+":"+(g-X)+"ms (CRTL pressed: "+ab+")")}},buildpager:function(){a(".pcontrol input",this.pDiv).val(A.page);a(".pcontrol span",this.pDiv).html(A.pages);var i=(A.page-1)*A.rp+1;var g=i+A.rp-1;if(A.total<g){g=A.total}var s=A.pagestat;s=s.replace(/{from}/,i);s=s.replace(/{to}/,g);s=s.replace(/{total}/,A.total);a(".pPageStat",this.pDiv).html(s)},setBusy:function(t){var g=false;var s=a(".pPageStat",this.pDiv);if(t){if(!this.loading){this.loading=true;s.data("content",s.html());s.html(A.procmsg);a(".pReload",this.pDiv).addClass("loading");a(I.block).css({top:I.bDiv.offsetTop,position:"absolute",width:I.bDiv.offsetWidth,height:I.bDiv.offsetHeight});if(A.hideOnSubmit){a(this.gDiv).prepend(I.block)}if(a.browser.opera){a(x).css("visibility","hidden")}g=true}}else{if(this.loading){var i=a(".pPageStat",this.pDiv);if(i.html()==A.procmsg){s.html(s.data("content"))}a(".pReload",this.pDiv).removeClass("loading");if(A.hideOnSubmit){a(I.block).remove()}I.hDiv.scrollLeft=I.bDiv.scrollLeft;if(a.browser.opera){a(x).css("visibility","visible")}this.loading=false;g=true}}return g},populate:function(){console.log("populate start ...");if(this.loading){return true}if(A.onSubmit){var g=A.onSubmit();if(!g){return false}}if(!A.url){return false}this.setBusy(true);if(!A.newp){A.newp=1}if(A.page>A.pages){A.page=A.pages}var t=[{name:"page",value:A.newp},{name:"rp",value:A.rp},{name:"query",value:A.query},{name:"qtype",value:A.qtype}];var i=[];for(F in t){var s=t[F];if(s&&s.name&&s.value){i.push(s)}}i=A.onPopulateCallback.call(A.owner,i);console.log("addData start ...");I.addData(i);console.log("addData finish ...");if(i&&A.clientsort&&A.sortModel&&A.sortModel.columns.length>0){console.log("multiSort start ...");this.multiSort(A.sortModel,new exxcellent.model.ColumnModel(A.colModel),new exxcellent.model.TableModel(new Array(i)));console.log("multiSort finish ...")}this.data=i;I.notifyForSelection()},doSearch:function(){A.query=a("input[name=q]",I.sDiv).val();A.qtype=a("select[name=qtype]",I.sDiv).val();A.newp=1;this.populate()},changePage:function(i){if(this.loading){return true}switch(i){case"first":A.newp=1;break;case"prev":if(A.page>1){A.newp=parseInt(A.page)-1}break;case"next":if(A.page<A.pages){A.newp=parseInt(A.page)+1}break;case"last":A.newp=A.pages;break;case"input":var g=parseInt(a(".pcontrol input",this.pDiv).val());if(isNaN(g)){g=1}if(g<1){g=1}else{if(g>A.pages){g=A.pages}}a(".pcontrol input",this.pDiv).val(g);A.newp=g;break}if(A.newp==A.page){return false}if(A.onChangePage){A.onChangePage.call(A.owner,A.newp)}else{this.populate()}},addCellProp:function(g,t,s,R){var Q=a(g);if(R!=null){if(a(R).hasClass("sorted")){Q.addClass("sorted")}if(R.hide){Q.css("display","none")}}var i=document.createElement("div");I.renderCell(s.componentIdx,i,g);if(!A.nowrap){Q.css("white-space","normal")}Q.empty().append(i)},getCellDim:function(s){var S=parseInt(a(s).height());var g=parseInt(a(s).parent().height());var Q=parseInt(s.style.width);var U=parseInt(a(s).parent().width());var R=s.offsetParent.offsetTop;var i=s.offsetParent.offsetLeft;var T=parseInt(a(s).css("paddingLeft"));var t=parseInt(a(s).css("paddingTop"));return{ht:S,wt:Q,top:R,left:i,pdl:T,pdt:t,pht:g,pwt:U}},clearSelection:function(){this.selectedRow=null;a(this.gDiv).noSelect()},processSelection:function(i,t){var s=i.attr("id").substr(3)*1;if(A.singleSelect){if(t.ctrlKey){if(i.is(".trSelected")){A.nur.push(s);i.toggleClass("trSelected")}else{A.nsr.push(s);i.toggleClass("trSelected");if(A.osr.length!=0){A.nur.push(A.osr[0]);a("#row"+A.osr[0]).toggleClass("trSelected")}}}else{if(i.is(".trSelected")){return}else{A.nsr.push(s);i.toggleClass("trSelected");if(A.osr.length!=0){A.nur.push(A.osr[0]);a("#row"+A.osr[0]).toggleClass("trSelected")}}}I.notifyForSelection()}else{if(t.ctrlKey){var g=null;if(i.is(".trSelected")){g=a.inArray(s,A.nsr);if(g!=-1){A.nsr.splice(g,1)}else{A.nur.push(s)}}else{g=a.inArray(s,A.nur);if(g!=-1){A.nur.splice(g,1)}else{A.nsr.push(s)}}i.toggleClass("trSelected")}else{if(i.is(".trSelected")){A.nur=a.makeArray(A.osr);A.nur.splice(a.inArray(s,A.nur),1)}else{A.nsr.push(s);A.nur=a.makeArray(A.osr)}i.addClass("trSelected");i.siblings().removeClass("trSelected");I.notifyForSelection()}}I.selectedRow=i},notifyForSelection:function(){if(A.onSelection){A.asr=a.merge(a.merge([],A.nsr),A.osr);a(A.nur).each(function(s,t){var g=a.inArray(t,A.asr);if(g!=null){A.asr.splice(g,1)}});A.onSelection.call(A.owner,A.asr,A.osr,A.nsr,A.nur);A.osr=a.makeArray(A.asr);A.nsr=a.makeArray();A.nur=a.makeArray()}},makeSelection:function(){},addRowProp:function(g){var i=g.attr("id").substr(3)*1;if(a.inArray(i,A.asr)!=-1){g.addClass("trSelected")}g.click(function(t){var s=(t.target||t.srcElement);if(s.href||s.type){return true}I.processSelection(a(this),t);t.stopPropagation()});if(a.browser.msie&&a.browser.version<7){g.hover(function(){a(this).addClass("trOver")},function(){a(this).removeClass("trOver")})}},pager:0,getCellHeader:function(g){if(g.is("th")){return g}else{return a("tr:eq(0) > th:eq("+g.index()+")",a("#"+a.fn.fixID("HEADER."+A.ownerId)))}},renderCell:function(s,Q,t){if(Echo.Render._disposedComponents==null){Echo.Render._disposedComponents={}}var g=null;if(typeof s=="number"){g=A.owner.component.getComponent(s)}else{g=s}t.id="CELL."+g.renderId;I.renderCellLayoutData(g,Q,t);Echo.Render.renderComponentAdd(new Echo.Update.ComponentUpdate(),g,Q);var i=Core.method(Q,function(S){if(S){console.log(S.data.toString())}if(S&&!S.data.hasUpdatedProperties()&&!S.data.hasAddedChildren()&&!S.data.hasRemovedChildren()&&!S.data.hasUpdatedLayoutDataChildren){return}var T=this.style.cssFloat;this.style.cssFloat="left";this.style.width="";this.style.height="";var R=new Core.Web.Measure.Bounds(this);this.style.width=R.width+"px";this.style.cssFloat=T});i();g.removeAllListeners("updated",true);g.addListener("updated",i,true)},renderCellWidth:function(i,t){var Q=a(i);var s=I.getCellHeader(Q);var g=s.data("isUserSized");if(s!=Q){if(g){Q.css("width",s.css("width"))}else{Q.css("width",t)}}else{if(!g){Q.css("width",t);this.rePosDrag()}}},renderCellHeight:function(i,g){i.style.height=g},renderCellAlignment:function(S,R,Q){var i=a(R);var g=Echo.Sync.Alignment.getRenderedHorizontal(Q);var s=typeof(Q)=="object"?Q.vertical:Q;switch(g){case"center":i.css({margin:"0 auto","float":"none"});break;default:i.css({"float":g});break}var t;switch(s){case"top":t="top";break;case"middle":t="middle";break;case"bottom":t="bottom";break;default:t="";break}S.style.verticalAlign=t;S.style.textAlign="center"},renderCellInsets:function(i,g){Echo.Sync.Insets.render(g,i,"padding")},renderCellBackground:function(i,g){Echo.Sync.Color.render(g,i,"backgroundColor")},renderCellBackgroundImage:function(i,g){Echo.Sync.FillImage.render(g,i)},renderCellLayoutData:function(g,t,s){var i=g.render("layoutData");if(i){if(i.width){I.renderCellWidth(s,i.width)}if(i.height){I.renderCellHeight(s,i.height)}if(i.alignment){I.renderCellAlignment(s,t,i.alignment)}I.renderCellInsets(t,i.insets);I.renderCellBackground(s,i.background);I.renderCellBackgroundImage(t,i.backgroundImage)}}};if(A.colModel){var J=document.createElement("thead");var d=document.createElement("tr");for(var F=0;F<A.colModel.length;F++){var q=A.colModel[F];var l=document.createElement("th");if(q.id!==null){a(l).attr("cmid",q.id);if(q.sortable){a(l).attr("abbr",q.id)}}a(l).attr("title",q.tooltip);if(q.hide||!q.visible){l.hide=true}if(q.process){l.process=q.process}a(l).data({rowDataIndex:F,componentIdx:q.cell.componentIdx,visible:q.visible});a(d).append(l)}a(J).append(d);a(x).prepend(J)}I.gDiv=document.createElement("div");I.mDiv=document.createElement("div");I.hDiv=document.createElement("div");I.bDiv=document.createElement("div");I.vDiv=document.createElement("div");I.rDiv=document.createElement("div");I.cDrag=document.createElement("div");I.block=document.createElement("div");I.nDiv=document.createElement("div");I.nBtn=document.createElement("div");I.iDiv=document.createElement("div");I.tDiv=document.createElement("div");I.sDiv=document.createElement("div");if(A.usepager||A.showPageStat){I.pDiv=document.createElement("div")}I.hTable=document.createElement("table");I.hTable.id="HEADER."+A.ownerId;I.gDiv.className="flexigrid";if(A.width!="auto"){I.gDiv.style.width=A.width+"px"}if(a.browser.msie){a(I.gDiv).addClass("ie")}if(A.novstripe){a(I.gDiv).addClass("novstripe")}a(x).before(I.gDiv);a(I.gDiv).append(x);if(A.buttons){I.tDiv.className="tDiv";var O=document.createElement("div");O.className="tDiv2";if(A.debug&&window.console&&window.console.log){console.log("Grid has "+A.buttons.length+" custom buttons.")}for(F=0;F<A.buttons.length;F++){var o=A.buttons[F];if(!o.separator){var G=document.createElement("div");G.className="fbutton";G.innerHTML="<div><span>"+o.name+"</span></div>";if(o.bclass){a("span",G).addClass(o.bclass).css({paddingLeft:20})}G.onpress=o.onpress;G.name=o.name;if(o.onpress){a(G).click(function(){this.onpress(this.name,I.gDiv)})}a(O).append(G);if(a.browser.msie&&a.browser.version<7){a(G).hover(function(){a(this).addClass("fbOver")},function(){a(this).removeClass("fbOver")})}}else{a(O).append("<div class='btnseparator'></div>")}}a(I.tDiv).append(O);a(I.tDiv).append("<div style='clear:both'></div>");a(I.gDiv).prepend(I.tDiv)}I.hDiv.className="hDiv";a(x).before(I.hDiv);I.hTable.cellPadding=0;I.hTable.cellSpacing=0;a(I.hDiv).append('<div class="hDivBox"></div>');a("div",I.hDiv).append(I.hTable);var J=a("thead:first",x).get(0);if(J){a(I.hTable).append(J)}J=null;if(!A.colmodel){var w=0}if(A.debug&&window.console&&window.console.log){console.log("Building table header")}a("thead tr:first th",I.hDiv).each(function(){var i=a(this);var t=document.createElement("div");I.renderCell(i.data("componentIdx"),t,this);var g=i.attr("abbr");if(g){i.click(function(S){if(!a(this).hasClass("thOver")){return false}var R=(S.target||S.srcElement);if(R.href||R.type){return true}var Q=a("div",this);if(Q.hasClass("active")){Q.toggleClass("sasc");Q.toggleClass("sdesc")}else{Q.addClass("active")}I.changeSort(this,S.ctrlKey)});if(A.sortModel&&A.sortModel.columns){for(F=0;F<A.sortModel.columns.length;F++){var s=A.sortModel.columns[F];if(g==s.columnId){i.addClass("sorted");t.className="s"+s.sortOrder}}}}if(this.hide){i.hide()}if(!A.colmodel){i.attr("axis","col"+w++)}i.empty().append(t).removeAttr("width").mousedown(function(Q){I.dragStart("colMove",Q,this)}).hover(function(){if(!I.colresize&&!a(this).hasClass("thMove")&&!I.colCopy){a(this).addClass("thOver")}if(a(this).attr("abbr")){var Y=a("div",this);var S=a(this).hasClass("sorted");if(!S&&!I.colCopy&&!I.colresize){Y.addClass("s"+A.sortorder)}else{if(S&&!I.colCopy&&!I.colresize){Y.toggleClass("sasc");Y.toggleClass("sdesc")}}}if(I.colCopy){var T=a("th",I.hDiv).index(this);if(T==I.dcoln){return false}var U=i.offset();var X=null;if(T<I.dcoln){X=a(I.cdropleft);X.css("left",U.left)}else{X=a(I.cdropright);X.css("left",U.left+i.width()-16)}X.css("top",U.top+(i.height()/2)-8);i.append(X);I.dcolt=T}else{if(!I.colresize){var W=a("th:visible",I.hDiv).index(this);var R=parseInt(a("div:eq("+W+")",I.cDrag).css("left"));var V=parseInt(a(I.nBtn).width())+parseInt(a(I.nBtn).css("borderLeftWidth"));var Q=R-V+Math.floor(A.cgwidth/2);a(I.nDiv).hide();a(I.nBtn).hide();a(I.nBtn).css({left:Q,top:I.hDiv.offsetTop,height:this.offsetHeight}).show();var Z=parseInt(a(I.nDiv).width());a(I.nDiv).css({top:I.bDiv.offsetTop});if((Q+Z)>a(I.gDiv).width()){a(I.nDiv).css("left",R-Z+1)}else{a(I.nDiv).css("left",Q)}if(a(this).hasClass("sorted")){a(I.nBtn).addClass("srtd")}else{a(I.nBtn).removeClass("srtd")}}}},function(){a(this).removeClass("thOver");var Q=a("div",this);if(!a(Q).hasClass("active")){var Q=a("div",this);if(!a(this).hasClass("sorted")){Q.removeClass("s"+A.sortorder)}else{Q.toggleClass("sasc");Q.toggleClass("sdesc")}}else{a(Q).removeClass("active")}if(I.colCopy){a(I.cdropleft).remove();a(I.cdropright).remove();I.dcolt=null}})});I.bDiv.className="bDiv";a(x).before(I.bDiv);a(I.bDiv).css({height:(A.height=="auto")?"50 px":A.height+"px"}).scroll(function(g){I.scroll();return true}).append(x);if(A.height=="auto"){a("table",I.bDiv).addClass("autoht")}a("tbody",I.bDiv).hide();var k=a("thead tr:first th:first",I.hDiv).get(0);if(k!=null){I.cDrag.className="cDrag";I.cdpad=0;I.cdpad+=(isNaN(parseInt(a("div",k).css("borderLeftWidth")))?0:parseInt(a("div",k).css("borderLeftWidth")));I.cdpad+=(isNaN(parseInt(a("div",k).css("borderRightWidth")))?0:parseInt(a("div",k).css("borderRightWidth")));I.cdpad+=(isNaN(parseInt(a("div",k).css("paddingLeft")))?0:parseInt(a("div",k).css("paddingLeft")));I.cdpad+=(isNaN(parseInt(a("div",k).css("paddingRight")))?0:parseInt(a("div",k).css("paddingRight")));I.cdpad+=(isNaN(parseInt(a(k).css("borderLeftWidth")))?0:parseInt(a(k).css("borderLeftWidth")));I.cdpad+=(isNaN(parseInt(a(k).css("borderRightWidth")))?0:parseInt(a(k).css("borderRightWidth")));I.cdpad+=(isNaN(parseInt(a(k).css("paddingLeft")))?0:parseInt(a(k).css("paddingLeft")));I.cdpad+=(isNaN(parseInt(a(k).css("paddingRight")))?0:parseInt(a(k).css("paddingRight")));a(I.bDiv).before(I.cDrag);var f=a(I.bDiv).height();var e=a(I.hDiv).height();a(I.cDrag).css({top:-e+"px"});a("thead tr:first th",I.hDiv).each(function(){var g=document.createElement("div");a(I.cDrag).append(g);if(!A.cgwidth){A.cgwidth=a(g).width()}a(g).css({height:f+e}).mousedown(function(i){I.dragStart("colresize",i,this)});if(a.browser.msie&&a.browser.version<7){I.fixHeight(a(I.gDiv).height());a(g).hover(function(){I.fixHeight();a(this).addClass("dragging")},function(){if(!I.colresize){a(this).removeClass("dragging")}})}})}if(A.striped){a("tbody tr:odd",I.bDiv).addClass("erow")}if(A.resizable&&A.height!="auto"){I.vDiv.className="vGrip";a(I.vDiv).mousedown(function(g){I.dragStart("vresize",g)}).html("<span></span>");a(I.bDiv).after(I.vDiv)}if(A.resizable&&A.width!="auto"&&!A.nohresize){I.rDiv.className="hGrip";a(I.rDiv).mousedown(function(g){I.dragStart("vresize",g,true)}).html("<span></span>").css("height",a(I.gDiv).height());if(a.browser.msie&&a.browser.version<7){a(I.rDiv).hover(function(){a(this).addClass("hgOver")},function(){a(this).removeClass("hgOver")})}a(I.gDiv).append(I.rDiv)}if(A.usepager||A.showPageStat){I.pDiv.className="pDiv";I.pDiv.innerHTML='<div class="pDiv2"></div>';a(I.bDiv).after(I.pDiv);if(A.usepager){var c=' <div class="pGroup"> <div class="pFirst pButton"><span></span></div><div class="pPrev pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">Page <input type="text" size="4" value="1" /> of <span> 1 </span></span></div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pNext pButton"><span></span></div><div class="pLast pButton"><span></span></div> </div>';a("div",I.pDiv).html(c);a(".pReload",I.pDiv).click(function(){I.populate()});a(".pFirst",I.pDiv).click(function(){I.changePage("first")});a(".pPrev",I.pDiv).click(function(){I.changePage("prev")});a(".pNext",I.pDiv).click(function(){I.changePage("next")});a(".pLast",I.pDiv).click(function(){I.changePage("last")});a(".pcontrol input",I.pDiv).keydown(function(g){if(g.keyCode==13){I.changePage("input")}});if(a.browser.msie&&a.browser.version<7){a(".pButton",I.pDiv).hover(function(){a(this).addClass("pBtnOver")},function(){a(this).removeClass("pBtnOver")})}if(A.useRp){var h="";for(var N=0;N<A.rpOptions.length;N++){if(A.rp==A.rpOptions[N]){B='selected="selected"'}else{B=""}h+="<option value='"+A.rpOptions[N]+"' "+B+" >"+A.rpOptions[N]+"&nbsp;&nbsp;</option>"}a(".pDiv2",I.pDiv).prepend("<div class='pGroup'><select name='rp'>"+h+"</select></div> <div class='btnseparator'></div>");a("select",I.pDiv).change(function(){A.newp=1;A.rp=+this.value;if(A.onRpChange){A.onRpChange.call(A.owner,+this.value)}else{I.populate()}})}}if(A.showPageStat){var E=' <div class="btnseparator"></div> <div class="pGroup"> <div class="pReload pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pPageStat"></span></div>';a(".pDiv2",I.pDiv).append(E);a(".pReload",I.pDiv).click(function(){I.populate()})}if(A.searchitems){a(".pDiv2",I.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>");a(".pSearch",I.pDiv).click(function(){a(I.sDiv).slideToggle("fast",function(){a(".sDiv:visible input:first",I.gDiv).trigger("focus")})});I.sDiv.className="sDiv";var D=A.searchitems;var j="";for(var y=0;y<D.length;y++){if(A.qtype==""&&D[y].isdefault==true){A.qtype=D[y].name;var B='selected="selected"'}else{B=""}j+="<option value='"+D[y].name+"' "+B+" >"+D[y].display+"&nbsp;&nbsp;</option>"}if(A.qtype==""){A.qtype=D[0].name}a(I.sDiv).append("<div class='sDiv2'>Quick Search <input type='text' size='30' name='q' class='qsbox' /> <select name='qtype'>"+j+"</select> <input type='button' value='Clear' /></div>");a("input[name=q],select[name=qtype]",I.sDiv).keydown(function(g){if(g.keyCode==13){I.doSearch()}});a("input[value=Clear]",I.sDiv).click(function(){a("input[name=q]",I.sDiv).val("");A.query="";I.doSearch()});a(I.bDiv).after(I.sDiv)}}a(I.pDiv,I.sDiv).append("<div style='clear:both'></div>");if(A.title){I.mDiv.className="mDiv";I.mDiv.innerHTML='<div class="ftitle">'+A.title+"</div>";a(I.gDiv).prepend(I.mDiv);if(A.showTableToggleBtn){a(I.mDiv).append('<div class="ptogtitle" title="'+A.mintablemsg+'"><span></span></div>');a("div.ptogtitle",I.mDiv).click(function(){a(I.gDiv).toggleClass("hideBody");a(this).toggleClass("vsble")})}}I.cdropleft=document.createElement("span");I.cdropleft.className="cdropleft";I.cdropright=document.createElement("span");I.cdropright.className="cdropright";I.block.className="gBlock";var L=a(I.bDiv).height();var P=I.bDiv.offsetTop;a(I.block).css({width:I.bDiv.style.width,height:L,background:"white",position:"relative",marginBottom:(L*-1),zIndex:1,top:P,left:"0px"});a(I.block).fadeTo(0,A.blockOpacity);if(a("th",I.hDiv).length){I.nDiv.className="nDiv";I.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>";a(I.nDiv).css({marginBottom:(L*-1),display:"none",top:P}).noSelect();a("th div",I.hDiv).each(function(i){var s=a("th[axis='col"+i+"']",I.hDiv);var g='checked = "checked"';if(s.css("display")=="none"){g=""}var t=document.createElement("tr");if(!s.data("visible")){a(t).css("display","none")}a("tbody",I.nDiv).append(t);a(t).append('<td class="ndcol1"><input type="checkbox" '+g+' class="togCol" value="'+i+'" /></td><td class="ndcol2">'+s.html()+"</td>")});if(a.browser.msie&&a.browser.version<7){a("tr",I.nDiv).hover(function(){a(this).addClass("ndcolover")},function(){a(this).removeClass("ndcolover")})}a("td.ndcol2",I.nDiv).click(function(){if(a("input:checked",I.nDiv).length<=A.minColToggle&&a(this).prev().find("input")[0].checked){return false}return I.toggleCol(a(this).prev().find("input").val())});a("input.togCol",I.nDiv).click(function(){if(a("input:checked",I.nDiv).length<A.minColToggle&&!this.checked){return false}a(this).parent().next().trigger("click")});a(I.gDiv).prepend(I.nDiv);a(I.nBtn).addClass("nBtn").html("<div></div>").attr("title",A.hidecolmsg).click(function(){a(I.nDiv).fadeToggle("fast");return true});if(A.showToggleBtn){a(I.gDiv).prepend(I.nBtn)}}a(I.iDiv).addClass("iDiv").css({display:"none"});a(I.bDiv).append(I.iDiv);a(I.bDiv).hover(function(){a(I.nDiv).hide();a(I.nBtn).hide()},function(){if(I.multisel){I.multisel=false}});a(I.gDiv).hover(function(){},function(){a(I.nDiv).hide();a(I.nBtn).hide()});a(document).mousemove(M).mouseup(C).mouseenter(m).mouseleave(n);function M(g){I.dragMove(g)}function C(){I.dragEnd()}function m(){}function n(){I.dragEnd()}I.cleanup=function(){a(document).unbind("mousemove",M).unbind("mouseup",C).unbind("mouseenter",m).unbind("mouseleave",n);a(x.grid.gDiv).remove();A.onToggleCol=null;A.onChangeSort=null;A.preProcess=null;A.onSuccess=null;A.onChangePage=null;A.onSubmit=null;A.onPopulateCallback=null;A.onDragCol=null;A.onResizeCol=null;A.onResizeGrid=null;A=null;I=null;x.grid=null;x.p=null;x=null};I.focus=function(g){if(A.debug&&window.console&&window.console.log){console.log("FlexFocus: focus is "+g)}if(this.loading){I.lazyFocus=I.focus}else{I.lazyFocus=null;if(!a("table tbody tr").hasClass("trSelected")){if(g){}else{a("table tbody tr").removeClass("trSelected")}}}};I.remoteControl=function(Q){if(I.selectedRow&&I.selectedRow!=null){var i=Q.keyCode;if(A.debug&&window.console&&window.console.log){var t=new Date();console.log("Triggered remoteControl keycode: "+i)}if(i==13){I.selectedRow.trigger("click")}else{if(i==40){var s=I.selectedRow.next();if(s.is("tr")){I.processSelection(s,Q);var R=0;s.prevAll().each(function(){R+=a(this).height()});if(a(I.bDiv).height()/2.3<R){I.bDiv.scrollTop=I.bDiv.scrollTop+s.height()}}}else{if(i==38){var g=I.selectedRow.prev();if(g.is("tr")){I.processSelection(g,Q);var R=0;g.nextAll().each(function(){R+=a(this).height()});if(a(I.bDiv).height()/2.3<R){I.bDiv.scrollTop=I.bDiv.scrollTop-g.height()}}}else{if(i==39){I.bDiv.scrollLeft=I.bDiv.scrollLeft+50;I.scroll()}else{if(i==37){I.bDiv.scrollLeft=I.bDiv.scrollLeft-50;I.scroll()}}}}}if(A.debug&&window.console&&window.console.log){console.log("Processed scrolltop: "+I.bDiv.scrollTop+", cHeight: "+a(I.bDiv).height()+" in :"+(new Date()-t)+"ms")}}return true};I.multiSort=function(s,R,X){var W=s.columns;var T=new Array();for(V=0;V<W.length;V++){var Y=W[V];for(var g=0;g<R.columns.length;g++){if(R.columns[g].id==Y.columnId){T.push(new Object({index:g,order:Y.sortOrder}))}}}T.reverse();if(A.debug&&window.console&&window.console.log){console.log("Sorting columns: "+T)}var U=new Array();for(var V=0;V<X.pages.length;V++){U=U.concat(X.pages[V].rows)}var S=new RegExp("[\\"+A.digitGroupDL+"]","g");var i=new RegExp("[\\"+A.decimalDelimiter+"]","g");U=Q(T,U);var t=X.pages[0];t.rows=U;return X;function Q(aa,ag){if(A.debug){var ac=new Date()}for(V=0;V<aa.length;V++){var ad=aa[V].index;var ab=aa[V].order;if(A.debug&&window.console&&window.console.log){console.log("Sorting column: "+ad+", "+ab)}ag.sort(ae)}if(A.debug&&window.console&&window.console.log){var af=new Date();console.log("Duration of multiSort on "+ag.length+" rows :"+(af-ac)+"ms")}return ag;function ae(am,al){var aj=A.owner.component.getComponent(am.cells[ad].componentIdx).get("text");var ai=A.owner.component.getComponent(al.cells[ad].componentIdx).get("text");if(!aj&&!ai){return 0}else{if(!aj&&ai){return -1}else{if(aj&&!ai){return 1}}}var ah;if(Z(aj)&&Z(ai)){if(typeof aj!="number"){var an=aj.replace(S,"")}if(typeof(an)!="undefined"){an=(+an.replace(i,"."))}if(typeof ai!="number"){var ak=ai.replace(S,"")}if(typeof(ak)!="undefined"){ak=ak.replace(i,".")}if(A.debug&&window.console&&window.console.log){console.log('Tested row type = "number" '+an+" to "+ak)}ah=ab=="asc"?an-ak:ak-an}else{if(A.debug&&window.console&&window.console.log){console.log('Tested row type = "string" '+aj+" to "+ai)}if(aj==ai){ah=0}if(ab=="asc"){ah=(aj<ai)?-1:1}else{ah=(aj>ai)?-1:1}}return ah}function Z(ai){if(typeof ai=="number"){return true}var ak="\\"+A.digitGroupDL;var ah="\\"+A.decimalDelimiter;var aj="(^([-+]?[\\d"+ak+ah+"]*)$)";return RegExp(aj).test(a.trim(ai))}}};I.reload=function(){I.loading=false;I.populate()};if(a.browser.msie&&a.browser.version<7){a(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",I.gDiv).css({width:"100%"});a(I.gDiv).addClass("ie6");if(A.width!="auto"){a(I.gDiv).addClass("ie6fullwidthbug")}}I.rePosDrag();I.fixHeight();x.p=A;x.grid=I;if(A.url&&A.autoload){I.populate()}else{if(A.debug){var z=new Date()}I.setBusy(true);function b(){I.setBusy(false);a("tbody",I.bDiv).show();if(A.debug&&window.console&&window.console.log){var g=new Date();console.log('Duration of rendering data of type "inlineHtml": '+(g-z)+"ms")}}var H=a("thead tr:first th",I.hDiv);var v=a("tbody tr",I.bDiv);var r=0;function K(){if(r<v.length){var t=v[r];if(t){var s=a(t);var g=0;a("td",t).each(function(){var i=false;if(H.length>g){i=H[g]||false}I.addCellProp(this,t,this.innerHTML,i);g++});I.addRowProp(s);r++;setTimeout(K,1)}else{b()}}else{b()}}setTimeout(K,1)}return x};a.fn.flexigrid=function(b){return this.each(function(){a.addFlex(this,b)})};a.fn.flexReload=function(b){return this.each(function(){if(this.grid){return this.grid.reload()}})};a.fn.flexOptions=function(b){return this.each(function(){if(this.grid){a.extend(this.p,b)}})};a.fn.flexToggleCol=function(c,b){return this.each(function(){if(this.grid){this.grid.toggleCol(c,b)}})};a.fn.flexAddData=function(b){return this.each(function(){if(this.grid){this.grid.addData(b)}})};a.fn.noSelect=function(c){if(c==null){var b=true}else{b=c}if(b){return this.each(function(){if(a.browser.msie||a.browser.safari){a(this).bind("selectstart",function(){return false})}else{if(a.browser.mozilla){a(this).css("MozUserSelect","none");a("body").trigger("focus")}else{if(a.browser.opera){a(this).bind("mousedown",function(){return false})}else{a(this).attr("unselectable","on")}}}})}else{return this.each(function(){if(a.browser.msie||a.browser.safari){a(this).unbind("selectstart")}else{if(a.browser.mozilla){a(this).css("MozUserSelect","inherit")}else{if(a.browser.opera){a(this).unbind("mousedown")}else{a(this).removeAttr("unselectable","on")}}}})}};a.fn.flexDestroy=function(){return this.each(function(){if(this.grid){var b=this.p.debug;if(b){var c=new Date()}this.grid.cleanup();if(b&&window.console&&window.console.log){console.log("flexDestroy took :"+(new Date()-c)+"ms")}}})};a.fn.flexMultiSort=function(c,b,d){return this.each(function(){if(this.grid){this.grid.multiSort(c,b,d)}})};a.fn.flexFocus=function(b){return this.each(function(){if(this.grid){this.grid.focus(b)}})};a.fn.flexRemoteControl=function(b){return this.each(function(){if(this.grid){this.grid.remoteControl(b)}})};a.fn.flexCheckSelection=function(){return this.each(function(){if(this.grid){this.grid.notifyForSelection()}})};a.fn.flexMakeSelection=function(b){return this.each(function(){if(this.grid){this.grid.makeSelection(b)}})};a.fn.flexRenderChilds=function(b){return this.each(function(){if(this.grid){this.grid.setBusy(true);var d=0;var c=Core.method(this,function(){var g=20;do{g--;if(d<b.length){var e=document.getElementById(b[d]);var f=document.createElement("div");this.grid.renderCell(/(\d*)$/.exec(b[d++])[0]*1,f,e);a(e).empty().append(f);if(g<=0){setTimeout(c,1);return}}else{g=0}}while(g>0);this.grid.setBusy(false)});setTimeout(c,1)}})};a.fn.flexRenderLayoutChilds=function(b){return this.each(function(){if(this.grid){this.grid.setBusy(true);var d=0;var c=Core.method(this,function(){var g=20;do{g--;if(d<b.length){var f=this.p.owner.component.getComponent(/(\d*)$/.exec(b[d])[0]*1);var e=document.getElementById(b[d++]);this.grid.renderCellLayoutData(f,e.firstChild,e);if(g<=0){setTimeout(c,1);return}}else{g=0}}while(g>0);this.grid.setBusy(false)});setTimeout(c,1)}})};a.fn.flexUpdateColumns=function(b){return this.each(function(){if(this.grid){var d=this.grid;var i=function(j,k){var l=a(a("td.ndcol2",d.nDiv)[j.index()]);var g=l.prev().find("input")[0].checked;if(g==k){l.trigger("click")}};for(u=0;u<b.length;u++){var c=a("th[cmid='"+b[u].ID+"']",d.hDiv);for(p=0;p<b[u].props.length;p++){var f=b[u].props[p][0];var h=b[u].props[p][1];switch(f){case exxcellent.FlexiGrid.COL_UPDATE_TOOLTIP:c.attr("title",h);break;case exxcellent.FlexiGrid.COL_UPDATE_SORTABLE:break;case exxcellent.FlexiGrid.COL_UPDATE_HIDED:i(c,h);break;case exxcellent.FlexiGrid.COL_UPDATE_VISIBLE:i(c,!h);var e=a(a("td.ndcol2",d.nDiv)[c.index()]).parent();if(h){e.css("display","")}else{e.css("display","none")}break;default:throw new Error("Unsupported column update property: "+f);break}}}}})};a.fn.fixID=function(b){return b.replace(/(:|\.)/g,"\\$1")};a.fn.unselectable=function(){return this.each(function(){a(this).css("-moz-user-select","none").css("-khtml-user-select","none").css("user-select","none");if(a.browser.msie){a(this).each(function(){this.ondrag=function(){return false}});a(this).each(function(){this.onselectstart=function(){return(false)}})}else{if(a.browser.opera){a(this).attr("unselectable","on")}}})}})(jQuery);